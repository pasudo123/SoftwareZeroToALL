# docker-swarm-zero-to-all
* 도커스웜을 정리.

<BR>

## <a id="index"></a>index
* [도커 스웜이 필요한 이유](#why-you-need-docker-swarm)
* [도커 스웜모드의 구조](#docker-swarm-structure)
* [도커 스웜모드 명령어](#docker-swarm-command)

## <a id="why-you-need-docker-swarm"></a>도커 스웜이 필요한 이유
하나의 호스트에서 도커엔진 구동 시, CPU와 메모리 그리고 디스크와 같은 용량의 자원이 부족한 경우가 있다. 이를 해결하기 위해 높은 스펙의 서버를 사용하는 것도 있지만 하나의 서버자원을 늘리는 것도 방법이 된다.

결과적으로 `여러 대의 서버` 를 `클러스터링` 하여서 확장하는 것이다. 이때 클러스터링된 각각의 컨테이너에 대한 관리를 일일히 하기에 부담이 되기때문에 그에 따라 필요한 것이 `도커스웜` 이다.

도커스웜을 사용하게 된다면 같은 컨테이너를 동시에 여러 개 생성해 필요에 따라서 유동적으로 `컨테이너 수를 조절` 할 수 있으며, 컨테이너로의 연결을 분산하는 로드밸런싱 기능을 지원한다. 그리고 고가용성(HA : High Availity) 기능도 제공하고 있기 때문에 도커 클러스터를 생각한다면 `도커스웜` 을 이용하는 것을 고려하여야 한다.

`도커스웜모드` 는 `클러스터링을 위한 모든 도구가 도커 엔진 자체에 내장` 되어 있기 때문에 쉽게 서버 클러스터를 구축할 수 있다. 

## <a id="docker-swarm-structure"></a>도커 스웜모드의 구조
* 두 개 형태의 노드가 존재한다.
    * 매니저노드 : 워커노드를 관리하기 위한 도커서버이다. 해당 서버에서 도커 컨테이너가 생성될 수 있다.
        * 기본적으로 워커노드의 역할을 포함한다.
    * 워커노드 : 실제 컨테이너가 생성되고 관리되는 도커서버이다.
* 매니저노드의 갯수는 `홀수` 개로 설정하는 것이 좋다.
    * 매니저노드의 절반이상 `노드` 에 장애가 발생했을 경우 복구시점까지 클러스터 운영을 중단한다.
    * 2개의 매니저노드 설정 시, 1개의 장애는 허용한다.
    * 3개의 매니저노드 설정 시, `2`개의 장애는 허용한다.
    * 4개의 매니저노드 설정 시, `2`개의 장애는 허용한다.
    * 5개의 매니저노드 설정 시, `3`개의 장애는 허용한다.
    * 6개의 매니저노드 설정 시, `3`개의 장애는 허용한다.
    * 위와 같은 부분 때문에 `홀수` 개로 매니저노드 설정 시, `짝수` 개의 매니저노드 설정보다 노드의 장애 값을 `+1` 더 허용할 수 있기 때문이다.

## <a id="docker-swarm-command"></a>도커 스웜모드 명령어

도커 스웜모드 활성화 여부
```shell
$ docker info | grep Swarm
Swarm: inactive
```

# reference
* 책 : 시작하세요! 도커/쿠버네티스 