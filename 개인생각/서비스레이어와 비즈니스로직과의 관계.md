# 서비스 레이어와 비즈니스 로직과의 관계
> 스프링부트로 개발을 진행하면서 `비즈니스 로직` 이라는 표현을 자주 접한다.   
> `비즈니스 로직` 이란 주어진 요구사항을 수행하기 위한 행위라고 생각한다.  

개발을 진행하면서 서비스레이어에 포함된 비즈니스 로직은 많아지고 이에따라서 어떻게 하는 것이 계층간의 구분을 명확히 하고 좀 더 객체에 집중한 형태, 도메인에 집중한 형태로 생각해보고자 한다.

## [MVC에서 비즈니스의 복잡도에 따라 서비스레이어가 비대해지는 현상](https://www.slipp.net/questions/386)
> `링크`의 글을 읽으면, 글쓴이분이 서비스 레이어에서 하는 일이 많아지고 있다고 말하고 있다.    
> 이에 따라 자바지기님이 답글을 달았다.
* 객체들간의 의존성을 가져야 좀 더 객체지향적인 코드가 된다고 한다.
  * 객체들간의 의존성이 있기 때문에 __특정한 객체__ 에게 비즈니스 로직을 위임할 수 있는 것이다.
* 객체들간의 의존성으로 해결되지 않는 부분들에 한해서는 다른 서비스 레이어와의 협력을 통해서 문제를 해결해나가야 한다.

## [영화예메시스템 도메인](http://pds18.egloos.com/pds/201011/10/18/Rich_Domain_Model.pdf)
> 객체지향사실과 오해를 집필한 저자가 해당 슬라이드를 만들었다.   
> __영화예매시스템 도메인__ 을 가지고 다각도 객체지향에 대해서 설명해주고 있다.
* 데이터 지향 설계
  * (1) 무엇을 저장할 것인가? :: __데이터__
  * (2) 어떻게 처리할 것인가? :: __프로세스__

### 중앙집중식 제어 스타일
<img src="https://github.com/pasudo123/SoftwareZeroToALL/blob/master/Image/%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A51.PNG" width="600px" /><img src="https://github.com/pasudo123/SoftwareZeroToALL/blob/master/Image/%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A52.PNG" width="600px" />

### 위임식, 분산식 제어 스타일
<img src="https://github.com/pasudo123/SoftwareZeroToALL/blob/master/Image/%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A53.PNG" width="600px" />

* 저자의 발표내용을 살펴보면, 저자가 첨언한 부분이 있다.
  * Domain Model 패턴은 애플리케이션의 핵심 지식을 담고 있는 __도메인 레이어를 객체지향적으로 구성하는 아키텍처 패턴__ 이다.
  * 대부분의 엔터프라이즈 애플리케이션은 도메인 레이어를 절차적인 방법 (위의 그림에서 언급되는 `중앙집중식 제어스타일`) 으로 구축하고 있다.
  * 중앙집중식 제어스타일은 __Transaction Script 패턴__ 을 적용함으로써 객체가 제공하는 다양한 혜택을 누리지 못하고 있다.
  * 저자는 __Transaction Script 패턴__ 을 선택하는 이유 중 하나가 바로 도메인의 개념을 표현하는 객체 모델과 데이터를 표현하는 데이터 모델간의 불일치 떄문에 해결하기가 쉽지 않다고 말하고 있다. 따라서 저자는 JPA 관련 활용 이야기를 작성해서 내용을 보여주고 있다.
  
     
> __Transaction Script 패턴__ 이란, 하나의 트랜잭션으로 구성된 로직을 `단일 함수` 또는 `단일 스크립트` 로 처리하는 구조를 일컫는다.  
> 흔히 생각하는 은행의 계좌이체 서비스를 떠올려보자. 잔고확인 --> 받는사람 확인 --> 이체수행 --> 잔고감소

## 참고자료
* http://blog.ant-holdings.com/2013/10/16/software-architect-courses-part-4-6
* http://aeternum.egloos.com/2628475
* http://pds24.egloos.com/pds/201110/20/18/Object-Oriented_Domain_Layer.pdf
