# 객체지향 중급문법

## 경로 표현식.
- .(=점)을 찍어 객체 그래프를 탐색하는 것.
```sql
select m.username from Member m
join m.team t join m.orders o where t.name = 'TEAM_A'
```
- m.username : 상태필드
- m.team : 단일 값 연관 필드
- m.orders : 컬렉션 값 연관 필드
- __위의 세가지를 구분해서 사용하여야 한다.__

### 상태필드
- 단순히 값을 저장하기 위한 필드
### 연관필드
- 연관관계를 위한 필드
  - 단일 값 연관필드 (@ManyToOne, @OneToOne) : 대상이 엔티티
  - 컬렉션 값 연관필드 (@OneToMany, @ManyToMany) : 대상이 컬렉션

### 경로 표현식 특징
- __상태필드__ : 경로 탐색 끝. 더 이상 탑색하지 않는다.
```java
String query = "select m.username from Member m"
```

- __단일값 연관 경로__ : 묵시적 내부 조인 발생, 탐색 수행
```java
String query = "select m.team.name from Member m"

/**
- 일반적인 상태필드에서의 쿼리는 조인이 발생하지 않으나, 
- Member 내의 Entity Team 을 조인하는 경우, ManyToOne 으로 연관관계 매핑이 되어있기 때문에 조인이 발생한다.
- 이에 따라 단일값 경로로 가게되었을 때, 묵시적인 내부조인이 발생되었다고 말한다.
**/
```

- __컬렉션값 연관 경로__ : 묵시적 내부 조인 발생, 탐색 수행 안함 (__김영한님도 사용하지 않는다고 한다.__)
```java
String query = "select t.members from Team t"
String query = "select t.members.size from Team t"
```
- 컬렉션으로 조회가 되기 때문에, 사용할 수 있는 메소드는 size 밖에 크게 없다.
- 명시적인 조인을 사용하여야 한다.
```java
String query = "select m from Team t join t.members m"
```

### 결론
- 실무에서 묵시적 조인을 쓰지 말자 !
  - 쿼리 튜닝하기가 어렵다. 막 쓰지말기
  - 묵시적 조인은 내부 조인만 가능하다.
- __명시적 조인을 사용하자__
  - join 키워드를 직접 사용한다.
  
