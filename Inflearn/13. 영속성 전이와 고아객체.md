# 영속성 전이와 고아객체

## 영속성 전이 : cascade
- 특정 엔티티를 영속상태로 만들 때, 연관된 엔티티도 함께 영속상태로 만들고 싶을 때 사용
- 부모 엔티티를 저장할 때 자식 엔티티도 같이 저장이 된다.

## 영속성 전이 __주의사항__
- 영속성 전이는 연관관계와 매핑하는 것과 아무 상관이 없다.
- 엔티티를 영속화할 때, 연관된 엔티티도 같이 영속화 시키는 편리함을 제공한다.

## Cascade.ALL 을 반드시 써야 하는가?
- 하나의 부모가 자식들을 관리하는 경우
- 부모와 자식의 라이프사이클이 거의 동일할 때.
- 단일 소유자인 경우
> 위의 경우에 사용한다.

## 고아객체
- 부모 엔티티와 연관관계가 끊어진 자식 엔티티를 자동으로 삭제
- __orphanRemoval = true__

## 고아객체 __주의사항__
- 참조가 제거된 엔티티는 다른 곳에서 참조하지 않는 고아객체로 보고 삭제하는 기능
- __참조하는 곳이 한 곳인 경우에 사용 !!!__
- __특정 엔티티가 개인 소유할 때 사용 !!!__
- @OneToOne & @OneToMany 만 가능
- 참고
  - 개념적으로 부모를 제거하면 자식은 고아가 된다.
  - 따라 객체 제거 기능이 활성화되면 부모를 제거할 때, 자식도 함께 제거된다.
  - 이것은 Cascade.REMOVE 처럼 동작한다.
  
## 영속성 전이 + 고아객체 섞어쓰기
- 부모 엔티티를 통해서 자식 엔티티의 생명주기를 관리할 수 있다.
  - DDD 를 진행할때 유용하게 쓰인다.
