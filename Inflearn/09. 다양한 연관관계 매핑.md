# 다양한 연관관계 매핑

# 연관관계 매핑시 고려사항 세가지
(1) 다중성 <br>
(2) 단방향, 양방향 여부 <br>
(3) 연관관계 주인 <br>

# 단방향, 양방향
- 테이블
  - 외래키 하나로 양쪽으로 조인이 가능 (따라서 방향이라는 개념이 존재하지 않는다.)
- 객체
  - 참조용 필드가 있는 쪽에서 참조가 가능
  - 한쪽만 참조하고 있으면 __단방향__
  - 앵쪽이 서로 참조하고 있으면 __양방향__

# 연관관계의 주인 (Owner)
- 테이블은 외래키 하나로 두 테이블이 연관관계를 맺는다.
- 객체 양방향 관계는 A -> B, B -> A 처럼 참조가 두 곳이다.
  - 객체의 양방향 관계는 참조가 두군데가 있고, 둘 중 테이블의 외래 키를 관리할 곳을 지정해주어야 한다.
- __외래 키를 관리하는 참조가 바로 연관관계의 주인이 된다.__
- 주인의 반대면은 외래키에 영향을 줄 수 없다. 단순 조회만 할 수 있다.

## 다대일 (N : 1) : @ManyToOne
- 외래 키가 있는 쪽이 연관관계의 주인이다.

## 일대다 (1 : N) : @OneToMany
```java
@Entity
public class Team {
    
    /** 생략 **/
    
    @OneToMany
    @JoinColumn(name = "TEAM_ID)
    private List<Member> members = new ArrayList<>();

}
```
-  __추천하지 않는 방법__ 이다.
  - 위와 같이 설정해놓은 persist() 시 INSERT 쿼리 + UPDATE 쿼리가 같이 나간다.

## 일대일 (1 : 1) : @OneToOne

## 다대다 (N : N ) : @ManyToOne
- __실무에서 잘 쓰이지 않는다.__
